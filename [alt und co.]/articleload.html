<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Artikelübersicht</title>
<style>
  body { font-family: sans-serif; padding: 2rem; background: #f5f5f5; }
  ul { list-style: none; padding: 0; }
  li { margin: 0.5rem 0; }
  a { text-decoration: none; color: #333; transition: color 0.2s; }
  a:hover { color: #007acc; }
  .preview { font-size: 0.9rem; color: #555; margin-top: 0.25rem; }
</style>
</head>
<body>
  <h1>Artikelübersicht</h1>
  <ul id="article-list"></ul>

  <script>
    const jsonUrl = "https://honest-entropy.github.io/articles.json";

    fetch(jsonUrl)
      .then(res => {
        if (!res.ok) throw new Error("Fehler beim Laden der JSON-Datei");
        return res.json();
      })
      .then(files => {
        const list = document.getElementById("article-list");

        // nach Datum sortieren (neueste zuerst)
        files.sort((a, b) => new Date(b.date) - new Date(a.date));

        files.forEach(file => {
          const li = document.createElement("li");

          const a = document.createElement("a");
          a.href = `public/${file.title}.html`;
          a.target = "_blank";
          a.textContent = file.title;
          li.appendChild(a);

          // Preview nur anzeigen, wenn vorhanden (bei den 3 neuesten)
          if (file.preview) {
            const previewDiv = document.createElement("div");
            previewDiv.className = "preview";
            previewDiv.textContent = file.preview;
            li.appendChild(previewDiv);
          }

          list.appendChild(li);
        });
      })
      .catch(err => {
        console.error(err);
        document.getElementById("article-list").textContent =
          "Artikel konnten nicht geladen werden.";
      });
  </script>
</body>
</html>
