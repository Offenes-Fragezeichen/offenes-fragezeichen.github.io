<!DOCTYPE html>
<html lang="de">
<head>
    <title>Fragezeichen | Zufall</title>
    <meta name="author" content="&Eacute;mile Jeremias Ruff">        
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="../favicon.ico">

    <link rel="stylesheet" href="../stylesheet.css" type="text/css">
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;700&display=swap" rel="stylesheet">
    <meta charset="UTF-8">

    <style>
        main {
            text-align: center;
            margin-top: 10%;
        }

        main p:nth-of-type(2) {
            margin-top: 25%;
        }

        main p:nth-of-type(3) {
            margin-top: 30%;
        }

        main button {
            background-color: transparent;
            border: 1px solid black;
            border-radius: 10px;
            padding: 10px;
            width: 20%;
            font-family: Lora;
            font-size: 15px;
        }

        #zufallsBtn:hover {
            background-color: rgba(0, 0, 0, 0.1);
            border: 1px dashed black;
        }

        #quitBtn {
            border: 1px solid grey;
            color: grey;
            margin-top: 10%;
            margin-bottom: 10%;
            margin-left: 8%;
        }

        main img {
            width: 13%;
            height: auto;
            margin-left: -40px;
            z-index: 2;
        }
    </style>
</head>
<body>
    
<input type="checkbox" id="darkModeToggle" checked style="--s:25px">

<svg style="display: none;" viewBox="0 0 500 500" class="menu"><g id="menu" transform="translate(200, 200)"></g><circle id="center" class="center-circle" cx="200" cy="200" r="60"/><image id="centerImage" href="../b/menu-dark.png" x="170" y="170" width="60" height="60" pointer-events="none"/></svg>
<div style="display: none;" class="werkzeuge"><img class="toggleTrigger dark-switch" data="false flex left" src="../b/settings.png" alt="Zahnrad - Werkzeuge/Einstellungen" title="Einstellungen/Werkzeuge"><div class="toggleContent" data-direction="left"><button id="fontToggle"><img class="dark-switch" src="../b/textsize.png" alt="Textgröße umschalten" title="Schriftgröße ändern"></button><button id="fullscreenBtn"><img class="dark-switch" src="../b/maximize.png" alt="Vollbildschirm" title="Vollbildschirm"></button><div id="audioPlayer"><button id="speakerBtn"><img src="../b/speaker.png" class="dark-switch" alt="Speaker" title="Vorlesen (wenn vorhanden)"></button><button id="playBtn"><img src="../b/play.png" class="dark-switch" alt="Play"></button><button id="pauseBtn"><img src="../b/pause.png" class="dark-switch" alt="Pause"></button><button id="backBtn"><img src="../b/10sec-back.png" class="dark-switch" alt="10 sec back"></button></div><audio id="myAudio" src="../m/.mp3"></audio></div></div>

<main>
    <button id="zufallsBtn">Leben</button>
    <p>(der kreativste Zufalls-Trigger der mir eingefallen ist, klicken um zufällig 
    weitergeleitet zu werden)</p>
    <p><i>=== Warnung ===</i><br>
    Triggern des Lebens kann zu unvorhersehbaren Glücks- und Unglücksmomenten führen

    <br><br>
    Fun Fact: „Glück“ und „Unglück“ sind hierbei irreführende Begriffe. Beides kann 
    sowohl zu Wohlbefinden als auch zu Schmerz führen, wenn nicht gar zu beidem. 
    Nun liegt es an einem jeden selbst zu entscheiden, ob er diese Chance auf 
    ersteres mit Risiko zweiterem eingehen möchte. Ich kann nämlich keinen Timer 
    zum automatischen Drücken des Buttons einfügen, das verhindern die Sicherheitseinstellungen 
    der Browser. Also liegt es an dir: Drücken oder verharren?
    </p>

    <p><i> === Warnung === </i><br>
    Verharren vorm Button des Lebens kann zu unvorhersehbaren Unglücksmomenten führen...
    nur das „Unglück“ hier ein treffender Ausdruck ist. Versteckt man sich vor all 
    diesem, mag man meinen, den Emotionen aus dem Weg zu gehen, sich vor dem Leid 
    schützen zu können. Das funktioniert aber nicht.
    </p>
</main>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="../script.js"></script>
<script>
let articles = [];

async function loadArticles() {
    const statusEl = document.getElementById("status");
    try {
        const response = await fetch("https://honest-entropy.github.io/articles.json?nocache=" + Date.now(), {
            cache: "no-store"
        });

        if (!response.ok) throw new Error("Fehler beim Laden der Artikelliste");
        const data = await response.json();

        if (!Array.isArray(data) || data.length === 0) {
            throw new Error("Keine Artikel gefunden");
        }

        articles = data;
        statusEl.textContent = `${articles.length} Artikel geladen.`;
    } catch (err) {
        console.error(err);
        statusEl.textContent = "Fehler beim Laden der Artikelliste.";
    }
}

document.getElementById("zufallsBtn").addEventListener("click", () => {
    if (!articles || articles.length === 0) {
        alert("Keine Artikel verfügbar!");
        return;
    }

    const randomArticle = articles[Math.floor(Math.random() * articles.length)];
    const title = randomArticle.title || "unbekannt";
    const safeFileName = title.replace(/\s+/g, "-") + ".html";

    window.location.href = `../beitrag/${safeFileName}`;
});

loadArticles();
</script>

</body>
</html>
